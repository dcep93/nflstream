<!DOCTYPE html>
<html>
  <body>
    <div>
      <div id="video-player"></div>
    </div>
    <script src="//cdn.jsdelivr.net/npm/@clappr/player@0.4.0/dist/clappr.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/cdnbye@latest/dist/hlsjs-p2p-engine.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/cdnbye@latest/dist/clappr-plugin.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/clappr/clappr-level-selector-plugin@latest/dist/level-selector.min.js"></script>
    <script>
      var UrlID = location.hash.substr(1);
      var data = {
        rawUrl: "http:\/\/cdn.weakstreams.com\/live\/WeakStreams\/live.m3u8",
      };
      var rawUrl = data.rawUrl;
      var playerElement = document.getElementById("video-player");
      player = new Clappr.Player({
        source: rawUrl,
        height: "100%",
        width: "100%",
        autoPlay: false,
        //  poster: '',
        plugins: [CDNByeClapprPlugin, LevelSelector],
        playback: {
          hlsjsConfig: {
            maxBufferSize: 0,
            maxBufferLength: 10,
            liveSyncDurationCount: 10,
            p2pConfig: {
              live: true,
              token: "U3LnNgNWg",
              wsSignalerAddr: "wss://signal.p2pengine.net:8089",
              announce: "https://tracker.p2pengine.net:7067/v1",
            },
          },
        },
        mediacontrol: { buttons: "#EE0000" },
        mimeType: "application/x-mpegURL",
      });
      player.attachTo(playerElement);
      function resizePlayer() {
        var aspectRatio = 9 / 16,
          newWidth =
            document.getElementById("video-player").parentElement.offsetWidth,
          newHeight = 2 * Math.round((newWidth * aspectRatio) / 2);
        player.resize({ width: newWidth, height: newHeight });
      }
      resizePlayer();
      window.onresize = resizePlayer;
    </script>
  </body>
</html>
